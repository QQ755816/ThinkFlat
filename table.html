<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Jquery -->
        <script src="/Public/plugs/jquery-1.12.4.min.js" type="text/javascript"></script>
        <!-- Bootstrap -->
        <link href="/Public/plugs/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <link href="/Public/plugs/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
        <script src="/Public/plugs/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
        <script src="/Public/plugs/tablegrid/tablegrid.js" type="text/javascript"></script>
        <link href="/Public/plugs/tablegrid/tablegrid.css" rel="stylesheet">
    </head>
    <body>
        <div class="container-fluid">
            <div id="div"></div>
            <div id="toolbar" class="toolbar">
                <button class="btn btn-default" id="addBtn"><span class="glyphicon glyphicon glyphicon-plus"></span>添加</button>
                <button class="btn btn-default" id="editBtn"><span class="glyphicon glyphicon glyphicon-edit"></span>修改</button>
                <button class="btn btn-default" id="removeBtn"><span class="glyphicon glyphicon glyphicon-remove"></span>删除</button>
            </div>
        </div>
        <div class="container-fluid">
            <table id="table">
                <tr>
                    <td data-field="id" data-center="true" data-sortable="true"></td>
                    <td data-field="name" data-center="true" data-sortable="true">Name</td>
                    <td data-field="company" data-sortable="true">Company</td>
                </tr>
                <tr><td>1</td><td>Airi</td><td>Satou</td></tr>
                <tr><td>2</td><td>Angelica</td><td>Ramos</td></tr>
                <tr><td>3</td><td>Brenden</td><td>Wagner</td></tr>
                <tr><td>4</td><td>Brielle</td><td>Williamson</td></tr>
                <tr><td>5</td><td>Bruno</td><td>Nash</td></tr>
                <tr><td>6</td><td>Cedric</td><td>Kelly</td></tr>
                <tr><td>7</td><td>Angelica</td><td>Ramos</td></tr>
                <tr><td>8</td><td>Airi</td><td>Satou</td></tr>
                <tr><td>9</td><td>Angelica</td><td>Ramos</td></tr>
                <tr><td>10</td><td>Brenden</td><td>Wagner</td></tr>
                <tr><td>11</td><td>Brielle</td><td>Williamson</td></tr>
                <tr><td>12</td><td>Bruno</td><td>Nash</td></tr>
                <tr><td>13</td><td>Cedric</td><td>Kelly</td></tr>
                <tr><td>14</td><td>Angelica</td><td>Ramos</td></tr>
            </table>
        </div>
    </body>
</html>
<script>
    $(function () {
        function _toggle() {
            $('#div').tablegrid('toggle');
        }
        function _add() {
            alert('Add');
        }
        function _update() {
            var index = $('#div').tablegrid('getSelectedRow')
            var rowdata = $('#div').tablegrid('getRowData', index);
            alert(JSON.stringify(rowdata))
        }
        function _delete() {
            var index = $('#div').tablegrid('getSelectedRow');
            var rowdata = $('#div').tablegrid('getRowData', index);
            alert(JSON.stringify(rowdata))
            //服务器删除数据
            //
            //服务器删除数据
            $('#div').tablegrid('removeRow', index);
        }
        function formatter(val, index, row) {
            var btn = $('<a href="javascript:;" class="btn btn-xs btn-success"><i class="glyphicon glyphicon-log-in"></i></a>');
            btn.bind('click',function(){
                alert(JSON.stringify(row))
            })
            return btn;
        }
        $('#addBtn').bind('click', _add);
        $('#editBtn').bind('click', _update);
        $('#removeBtn').bind('click', _delete);
        $('#div').tablegrid({
            title: 'Table with tools Table with tools Table with tools',
            buttons: [
                {name: '', btnClass: 'btn-link glyphicon glyphicon-refresh', action: function () {
                        $('#div').tablegrid('reload');
                    }
                },
                {name: '', btnClass: 'btn-link glyphicon glyphicon-chevron-down', action: _toggle},
            ],
            Class: 'table table-striped table-bordered table-hover table-condensed',
            pagination: true, //是否分页
            responsive: true,
            href: '/tdata.php',
            paginationBtns: 1, //左右最多各显示多少个按钮
            columns: [
                {field: 'id', label: '编号', center: true},
                {field: 'first_name', label: '姓', width: 100},
                {field: 'last_name', label: '名', width: 100},
                {field: 'position', label: '地址', width: 100, center: true},
                {field: 'office', label: '工作地点', width: 100},
                {field: 'start_date', label: '工作时间', width: 100},
                {field: 'salary', label: '资金', width: 100},
                {field: 'oper', label: '操作', width: 50, center: true, formatter: formatter},
            ],
            merge: ['first_name', 'last_name'],
            toolbar: '#toolbar',
        });
        $('#table').tablegrid({
            title: 'Table',
            responsive: true,
            buttons: [
                {name: '', btnClass: 'btn-link glyphicon glyphicon-plus', action: function () {
                        alert('Add');
                    }},
                {name: '', btnClass: 'btn-link glyphicon glyphicon-edit', action: function () {
                        alert('Update');
                    }},
                {name: '', btnClass: 'btn-link glyphicon glyphicon-remove', action: function () {
                        alert('Delete');
                    }},
            ],
            Class: 'table table-striped table-bordered table-hover table-condensed',
            pagination: true, //是否分页
            paginationBtns: 2, //左右最多各显示多少个按钮
        });
    })
</script>